<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="apple-touch-icon" sizes="76x76" href="{{ asset('assets/img/apple-icon.png') }}">
    <link rel="icon" type="image/png" href="{{ asset('web/img/icons/favicon.png') }}">
    <title>Admin Login | AHC</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">

    <style>
      :root{
        --bg:#0F172A;
        --card:#0B1930;
        --muted:#9CA3AF;
        --ink:#F9FAFB;
        --accent:#22C55E;
        --accent-2:#38BDF8;
        --danger:#e11d48;
        --glass:rgba(255,255,255,.08)
      }

      *,*::before,*::after{box-sizing:border-box}
      html,body{height:100%}
      body{
        margin:0;
        font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
        color:var(--ink);
        background:
          radial-gradient(1000px 320px at 10% 0%, #38bdf833, transparent),
          radial-gradient(900px 320px at 90% 0%, #22c55e33, transparent),
          linear-gradient(180deg,#0f172a,#1d3557);
        min-height:100vh;
        display:flex;
        align-items:center;
        justify-content:center;
        padding:24px;
      }

      .blob{
        position:fixed;
        inset:auto;
        pointer-events:none;
        filter:blur(32px);
        opacity:.35;
        mix-blend-mode:screen;
        z-index:0
      }
      .blob.b1{
        width:420px;height:420px;
        background:#38bdf844;
        top:-40px;left:-40px;
        animation:drift 18s ease-in-out infinite
      }
      .blob.b2{
        width:420px;height:420px;
        background:#22c55e33;
        right:-60px;top:120px;
        animation:drift 22s ease-in-out infinite reverse
      }
      .blob.b3{
        width:360px;height:360px;
        background:#facc1530;
        left:45%;bottom:-120px;
        animation:drift 26s ease-in-out infinite
      }
      @keyframes drift{
        0%,100%{transform:translate(0,0) scale(1)}
        50%{transform:translate(24px,-24px) scale(1.06)}
      }

      .brand{
        position:absolute;
        top:16px;left:20px;
        display:flex;
        align-items:center;
        gap:10px;
        z-index:3
      }
      .brand img{width:min(260px,28vw);height:auto}

      .auth-shell{position:relative;z-index:1;width:min(1100px,96vw)}
      .auth-card{
        background: radial-gradient(circle at top left,#22c55e12,#0b1930 40%,#020817 100%);
        border: 1px solid #ffffff18;
        border-radius: 22px;
        padding: clamp(18px, 2.5vw, 30px);
        box-shadow: 0 24px 70px #00000088;
      }

      /* SUNNY SCENE */
      .scene{
        position:relative;
        border-radius:18px;
        overflow:hidden;
        background:
          radial-gradient(220px 220px at 85% 0%, #fde68a, transparent 70%),
          linear-gradient(180deg,#60a5fa,#22c55e);
        height:clamp(220px, 38vh, 420px);
      }
      .scene .glass{
        position:absolute;
        inset:0;
        background:linear-gradient(180deg,var(--glass),transparent 80%);
        border:1px solid #ffffff1a;
        border-radius:18px
      }

      canvas#stars{
        position:absolute;
        inset:0;
        display:block;
      }

      /* STICK CHARACTERS */
      .characters{
        position:absolute;
        inset:0;
        display:flex;
        align-items:flex-end;
        justify-content:center;
        gap:40px;
        padding-bottom:32px;
        pointer-events:none;
      }

      .stick-person{
        position:relative;
        width:90px;
        display:flex;
        flex-direction:column;
        align-items:center;
        gap:6px;
        animation:bob 4s ease-in-out infinite;
      }
      .stick-person:nth-child(2){
        animation-duration:4.6s;
        animation-delay:.15s;
      }

      @keyframes bob{
        0%,100%{transform:translateY(0)}
        50%{transform:translateY(-8px)}
      }

      .stick-head{
        width:54px;height:54px;
        border-radius:50%;
        background:#ffffff;
        border:3px solid #111827;
        display:flex;
        flex-direction:column;
        align-items:center;
        justify-content:center;
        box-shadow:0 8px 16px rgba(15,23,42,.3);
      }
      .eyes{
        width:70%;
        display:flex;
        justify-content:space-between;
        align-items:center;
      }
      .eye{
        width:10px;height:10px;
        border-radius:50%;
        background:#111827;
        display:flex;
        align-items:center;
        justify-content:center;
        overflow:hidden;
      }
      .pupil{
        width:6px;height:6px;
        border-radius:50%;
        background:#f9fafb;
        transform:translate(0,0);
        transition:transform .06s linear, opacity .2s ease;
      }

      /* Smile */
      .mouth{
        width:22px;
        height:10px;
        margin-top:2px;
        border-bottom:3px solid #22c55e;
        border-radius:0 0 22px 22px;
      }

      /* When closed (for eye toggle), keep it simple */
      .eye.closed,
      .eye.blink{
        height:3px;
        border-radius:999px;
        background:#111827;
      }
      .eye.closed .pupil,
      .eye.blink .pupil{
        opacity:0;
        transform:translate(0,4px) scale(.5);
      }

      .stick-body{
        width:3px;
        height:40px;
        background:#111827;
      }
      .stick-arms{
        position:relative;
        width:52px;
        height:14px;
      }
      .stick-arms::before,
      .stick-arms::after{
        content:"";
        position:absolute;
        top:0;
        width:24px;
        height:3px;
        background:#111827;
      }
      .stick-arms::before{
        left:0;
        transform-origin:left center;
        transform:rotate(12deg);
      }
      .stick-arms::after{
        right:0;
        transform-origin:right center;
        transform:rotate(-12deg);
      }

      .stick-legs{
        position:relative;
        width:38px;
        height:26px;
        margin-top:-4px;
      }
      .stick-legs::before,
      .stick-legs::after{
        content:"";
        position:absolute;
        bottom:0;
        width:3px;
        height:24px;
        background:#111827;
      }
      .stick-legs::before{
        left:6px;
        transform-origin:top center;
        transform:rotate(8deg);
      }
      .stick-legs::after{
        right:6px;
        transform-origin:top center;
        transform:rotate(-8deg);
      }

      .auth-form{max-width:520px;margin-inline:auto}
      .auth-form h2{
        margin:0 0 8px 0;
        font-size:clamp(26px,2.4vw,32px);
        letter-spacing:.2px;
        text-align:center;
        color:#E5F4FF;
      }
      .lead{
        margin:0;
        color:var(--muted);
        font-size:clamp(16px,1.6vw,19px);
        text-align:center;
      }
      .lead strong{
        color:#22c55e;
        font-weight:700;
      }

      label{
        font-size:15px;
        color:#cbd5e1;
        font-weight:700;
      }
      .input{
        display:flex;
        align-items:center;
        gap:8px;
        background:#020817;
        padding:12px;
        border-radius:14px;
        border:1px solid #ffffff18;
      }
      .input:focus-within{
        border-color:#22c55e99;
        box-shadow:0 0 0 4px #22c55e22;
      }
      .input input{
        border:0;
        background:transparent;
        outline:none;
        width:100%;
        font-size:15px;
        color:#e5e7eb;
      }
      .eye-btn{
        background:transparent;
        border:0;
        padding:6px;
        border-radius:8px;
        cursor:pointer;
        display:inline-flex;
        align-items:center;
        justify-content:center;
      }

      .submit{
        margin-top:8px;
        padding:13px 16px;
        border-radius:16px;
        border:0;
        background:linear-gradient(90deg,var(--accent),var(--accent-2));
        color:#001018;
        font-weight:800;
        font-size:15px;
        cursor:pointer;
        box-shadow:0 14px 26px #22c55e33,inset 0 -6px 10px #00000022;
        letter-spacing:.3px;
        position:relative;
        overflow:hidden;
      }
      .submit::after{
        content:"";
        position:absolute;
        inset:0;
        background:radial-gradient(120px 40px at var(--mx,10%) 10%, #ffffffaa, transparent 45%);
        opacity:0;
        transition:opacity .25s;
      }
      .submit:hover::after{opacity:.5}
      .submit:active{transform:translateY(1px)}
      .is-invalid{outline:0}
      .invalid-feedback{
        display:block;
        color:var(--danger);
        font-size:12px;
        margin:6px 2px 0;
      }
      .input.invalid{
        border-color:rgba(225,29,72,.55);
        background:#2a0f1a;
      }

      input:-webkit-autofill,
      input:-webkit-autofill:hover,
      input:-webkit-autofill:focus{
        -webkit-box-shadow:0 0 0 1000px #020817 inset !important;
        -webkit-text-fill-color:#fff !important;
        caret-color:#fff !important;
        border-radius:12px;
      }
      .form-control{padding:5px !important}
      .form-control:focus{
        color:#fff !important;
        padding:0px 10px !important;
      }

      @media (max-width: 992px){
        .scene{height:clamp(220px, 34vh, 360px)}
      }
      @media (max-width: 768px){
        body{padding:16px}
        .characters{gap:24px}
        .stick-person{width:80px}
        .brand{top:12px;left:14px}
        .blob{filter:blur(28px);opacity:.3}
      }
      @media (max-width: 576px){
        .blob{display:none}
        .auth-card{padding:16px}
        .scene{order:2; height:260px; margin-top:12px}
      }
      @media (prefers-reduced-motion: reduce){
        .stick-person,.blob{animation:none}
        .submit::after{display:none}
      }
    </style>
  </head>
  <body>
    <div class="blob b1"></div>
    <div class="blob b2"></div>
    <div class="blob b3"></div>

    <div class="brand">
      <img src="{{ asset('assets/img/Logo 01.png') }}" alt="AHC" />
    </div>

    <div class="auth-shell">
      <div class="auth-card">
        <div class="container-fluid">
          <div class="row g-3 align-items-stretch">
            <!-- SUNNY STICK-FIGURE ILLUSTRATION -->
            <div class="col-12 col-lg-6 order-2 order-lg-1 d-none d-md-block">
              <div class="scene" id="scene" aria-hidden="true">
                <canvas id="stars"></canvas>
                <div class="characters follow" id="characters">
                  <div class="stick-person">
                    <div class="stick-head">
                      <div class="eyes">
                        <div class="eye"><div class="pupil"></div></div>
                        <div class="eye"><div class="pupil"></div></div>
                      </div>
                      <div class="mouth"></div>
                    </div>
                    <div class="stick-body"></div>
                    <div class="stick-arms"></div>
                    <div class="stick-legs"></div>
                  </div>
                  <div class="stick-person">
                    <div class="stick-head">
                      <div class="eyes">
                        <div class="eye"><div class="pupil"></div></div>
                        <div class="eye"><div class="pupil"></div></div>
                      </div>
                      <div class="mouth"></div>
                    </div>
                    <div class="stick-body"></div>
                    <div class="stick-arms"></div>
                    <div class="stick-legs"></div>
                  </div>
                </div>
                <div class="glass"></div>
              </div>
            </div>

            <!-- FORM -->
            <div class="col-12 col-lg-6 d-flex order-1 order-lg-2">
              <form class="auth-form w-100" method="POST" action="{{ route('login') }}" novalidate>
                @csrf
                <h2>Admin Login</h2>
                <p class="lead">Welcome Back, <strong>Team AHC</strong> ðŸŒž</p>

                <div class="mt-3">
                  <label for="email" class="form-label">Email</label>
                  <div class="input @error('email') invalid @enderror ">
                    <input id="email" type="email" name="email" value="{{ old('email') }}" placeholder="you@example.com" autocomplete="username" class="form-control bg-transparent border-0 p-0 @error('email') is-invalid @enderror" required />
                  </div>
                  @error('email')
                    <span class="invalid-feedback" role="alert">{{ $message }}</span>
                  @enderror
                </div>

                <div class="mt-2">
                  <label for="password" class="form-label">Password</label>
                  <div class="input @error('password') invalid @enderror align-items-center">
                    <input id="password" type="password" name="password" placeholder="password" autocomplete="current-password" class="form-control bg-transparent border-0 p-0 @error('password') is-invalid @enderror" required />
                    <button type="button" class="eye-btn" id="toggleEye" aria-pressed="false" aria-label="Show password" title="Show/Hide password">
                      <svg id="eyeIcon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#9ca3af" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M1 12s4-7 11-7 11 7 11 7-4 7-11 7S1 12 1 12z"></path>
                        <line x1="2" y1="2" x2="22" y2="22"></line>
                      </svg>
                    </button>
                  </div>
                  @error('password')
                    <span class="invalid-feedback" role="alert">{{ $message }}</span>
                  @enderror
                </div>

                <div class="d-flex align-items-center justify-content-between mt-2">
                  <label class="d-flex align-items-center gap-2">
                    <input type="checkbox" name="remember" {{ old('remember') ? 'checked' : '' }}>
                    <span class="small text-light">Remember me</span>
                  </label>
                </div>

                <button class="submit w-100 mt-3" id="loginBtn" style="color:#fff" type="submit">Log in</button>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script>
      const qs = s => document.querySelector(s);
      const qsa = s => Array.from(document.querySelectorAll(s));

      const scene = qs('#scene');
      const charactersEl = qs('#characters');
      const pupils = qsa('.pupil');
      const eyes = qsa('.eye');
      const password = qs('#password');
      const toggleEye = qs('#toggleEye');
      const eyeIcon = qs('#eyeIcon');

      let isShowing = false;

      // soft sunny sparkles
      (function stars(){
        const c = qs('#stars');
        if(!c || !scene) return;
        const ctx = c.getContext('2d');
        let w,h,stars = []; const COUNT = 40;
        function resize(){
          const rect = scene.getBoundingClientRect();
          w = c.width = rect.width;
          h = c.height = rect.height;
          stars = new Array(COUNT).fill(0).map(() => ({
            x: Math.random()*w,
            y: Math.random()*h*0.6,
            r: Math.random()*2 + 0.8,
            a: 0.4 + Math.random()*0.4
          }));
        }
        new ResizeObserver(resize).observe(scene);
        resize();
        function tick(){
          ctx.clearRect(0,0,w,h);
          for(const s of stars){
            ctx.beginPath();
            ctx.arc(s.x,s.y,s.r,0,Math.PI*2);
            ctx.fillStyle = `rgba(255,255,255,${s.a})`;
            ctx.fill();
            s.a = 0.4 + Math.sin(Date.now()/300 + s.x)*0.25;
          }
          requestAnimationFrame(tick);
        }
        tick();
      })();

      function setFollow(on){
        if(on){
          charactersEl.classList.add('follow');
          pupils.forEach(p=>p.style.transform='translate(0,0)');
        }else{
          charactersEl.classList.remove('follow');
          pupils.forEach(p=>p.style.transform='translate(0,0)');
        }
      }

      function setEyesClosed(closed){
        eyes.forEach(e=>{
          e.classList.toggle('closed',closed);
        });
      }

      setFollow(true);
      setEyesClosed(false);

      toggleEye.addEventListener('click',()=>{
        if(!password) return;
        isShowing = !isShowing;
        password.type = isShowing ? 'text':'password';
        toggleEye.setAttribute('aria-pressed', String(isShowing));
        toggleEye.setAttribute('aria-label', isShowing ? 'Hide password':'Show password');
        setFollow(!isShowing);
        setEyesClosed(isShowing);
        eyeIcon.innerHTML = isShowing
          ? '<path d="M1 12s4-7 11-7 11 7 11 7-4 7-11 7S1 12 1 12z"></path><circle cx="12" cy="12" r="3"></circle>'
          : '<path d="M1 12s4-7 11-7 11 7 11 7-4 7-11 7S1 12 1 12z"></path><line x1="2" y1="2" x2="22" y2="22"></line>';
      });

      let mouse = {x:0,y:0};
      function updatePupils(){
        if(!charactersEl.classList.contains('follow')) return;
        const sceneRect = scene.getBoundingClientRect();
        pupils.forEach(p=>{
          const eye = p.parentElement;
          const eyeRect = eye.getBoundingClientRect();
          const cx = eyeRect.left + eyeRect.width/2 - sceneRect.left;
          const cy = eyeRect.top + eyeRect.height/2 - sceneRect.top;
          const vx = mouse.x - cx;
          const vy = mouse.y - cy;
          const dist = Math.hypot(vx,vy)||1;
          const dirx = vx/dist;
          const diry = vy/dist;
          const maxTravel = 3.5;
          p.style.transform = `translate(${(dirx*maxTravel).toFixed(2)}px, ${(diry*maxTravel).toFixed(2)}px)`;
        });
      }

      function setMouseFromEvent(e){
        if(!scene) return;
        const r = scene.getBoundingClientRect();
        const ex = (e.clientX ?? e.touches?.[0]?.clientX);
        const ey = (e.clientY ?? e.touches?.[0]?.clientY);
        mouse.x = ex - r.left;
        mouse.y = ey - r.top;
        if(charactersEl.classList.contains('follow')) requestAnimationFrame(updatePupils);
      }

      scene?.addEventListener('mousemove', setMouseFromEvent);
      scene?.addEventListener('touchmove', setMouseFromEvent, {passive:true});
      scene?.addEventListener('mouseleave', ()=>{
        if(!charactersEl.classList.contains('follow')) return;
        pupils.forEach(p=>p.style.transform='translate(0px,0px)');
      });

      function scheduleBlink(eye){
        const time = Math.random()*2600 + 1800;
        setTimeout(()=>{
          eye.classList.add('blink');
          setTimeout(()=>{
            eye.classList.remove('blink');
            scheduleBlink(eye);
          },140);
        }, time);
      }
      eyes.forEach(scheduleBlink);

      // Welcome back memory
      const form = document.querySelector('form');
      const emailInput = document.getElementById('email');
      const welcomeText = document.querySelector('.lead');
      function toTitleCase(name){ return name ? name.charAt(0).toUpperCase()+name.slice(1) : name }
      const savedUser = localStorage.getItem('ahcUser');
      if(savedUser){
        welcomeText.innerHTML = `Welcome Back, <strong>${toTitleCase(savedUser)}</strong> ðŸŒž`;
      }
      form?.addEventListener('submit', ()=>{
        const email = emailInput?.value?.trim();
        if(email){
          const userName = email.split('@')[0];
          localStorage.setItem('ahcUser', userName);
        }
      });
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
  </body>
</html>
